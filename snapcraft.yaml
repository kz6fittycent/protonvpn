name: protonvpn
adopt-info: protonvpn
summary: A Linux CLI for ProtonVPN. Written in Python.
description: |
  ProtonVPN-CLI is a full rewrite of the bash protonvpn-cli in Python, 
  which adds more features and functionality with the purpose of 
  improving readability, speed and reliability.
  
license: GPL-3.0

base: core20
grade: stable 
confinement: strict

package-repositories:
 - type: apt
   ppa: deadsnakes/ppa

apps:
  protonvpn:
    command: bin/protonvpn
    extensions:
      - gnome-3-38    
    environment:
      LC_ALL: C.UTF-8
      LANG: C.UTF-8
      PYTHONPATH: $SNAP/usr/lib/python3.9/dist-packages
    plugs:  
      - network
      - network-bind
      - network-control
      - home   
         
parts: 
  protonvpn:
    source: https://github.com/ProtonVPN/linux-app
    source-type: git
    plugin: python
      
    override-pull: |
      snapcraftctl pull
      snapcraftctl set-version "$(git describe --tags | sed 's/^v//' | cut -d "-" -f1)"  
      
    build-packages:
      - python3-gi
      - python3-psutil
      - python3-pip
      
    stage-packages:
      - python3-gi
      - python3-psutil
